"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[60775],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>h});var a=n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},u=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},g=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,s=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),c=p(n),g=o,h=c["".concat(s,".").concat(g)]||c[g]||d[g]||r;return n?a.createElement(h,l(l({ref:t},u),{},{components:n})):a.createElement(h,l({ref:t},u))}));function h(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,l=new Array(r);l[0]=g;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i[c]="string"==typeof e?e:o,l[1]=i;for(var p=2;p<r;p++)l[p]=n[p];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}g.displayName="MDXCreateElement"},49248:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>g,contentTitle:()=>c,default:()=>k,frontMatter:()=>u,metadata:()=>d,toc:()=>h});var a=n(87462),o=(n(67294),n(3905));const r=(l="CodeOutputBlock",function(e){return console.warn("Component "+l+" was not imported, exported, or provided by MDXProvider as global scope"),(0,o.kt)("div",e)});var l;const i={toc:[]},s="wrapper";function p(e){let{components:t,...n}=e;return(0,o.kt)(s,(0,a.Z)({},i,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},"from langchain.agents import load_tools\nfrom langchain.agents import initialize_agent\nfrom langchain.agents import AgentType\nfrom langchain.llms import OpenAI\n")),(0,o.kt)("p",null,"First, let's load the language model we're going to use to control the agent."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},"llm = OpenAI(temperature=0)\n")),(0,o.kt)("p",null,"Next, let's load some tools to use. Note that the ",(0,o.kt)("inlineCode",{parentName:"p"},"llm-math")," tool uses an LLM, so we need to pass that in."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'tools = load_tools(["serpapi", "llm-math"], llm=llm)\n')),(0,o.kt)("p",null,"Finally, let's initialize an agent with the tools, the language model, and the type of agent we want to use."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},"agent = initialize_agent(tools, llm, agent=AgentType.ZERO_SHOT_REACT_DESCRIPTION, verbose=True)\n")),(0,o.kt)("p",null,"Now let's test it out!"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'agent.run("Who is Leo DiCaprio\'s girlfriend? What is her current age raised to the 0.43 power?")\n')),(0,o.kt)(r,{lang:"python",mdxType:"CodeOutputBlock"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'    \n    \n    > Entering new AgentExecutor chain...\n     I need to find out who Leo DiCaprio\'s girlfriend is and then calculate her age raised to the 0.43 power.\n    Action: Search\n    Action Input: "Leo DiCaprio girlfriend"\n    Observation: Camila Morrone\n    Thought: I need to find out Camila Morrone\'s age\n    Action: Search\n    Action Input: "Camila Morrone age"\n    Observation: 25 years\n    Thought: I need to calculate 25 raised to the 0.43 power\n    Action: Calculator\n    Action Input: 25^0.43\n    Observation: Answer: 3.991298452658078\n    \n    Thought: I now know the final answer\n    Final Answer: Camila Morrone is Leo DiCaprio\'s girlfriend and her current age raised to the 0.43 power is 3.991298452658078.\n    \n    > Finished chain.\n\n\n\n\n\n    "Camila Morrone is Leo DiCaprio\'s girlfriend and her current age raised to the 0.43 power is 3.991298452658078."\n'))))}p.isMDXComponent=!0;const u={sidebar_position:4},c="Agents",d={unversionedId:"modules/agents/index",id:"modules/agents/index",title:"Agents",description:"Some applications require a flexible chain of calls to LLMs and other tools based on user input. The Agent interface provides the flexibility for such applications. An agent has access to a suite of tools, and determines which ones to use depending on the user input. Agents can use multiple tools, and use the output of one tool as the input to the next.",source:"@site/docs/modules/agents/index.mdx",sourceDirName:"modules/agents",slug:"/modules/agents/",permalink:"/langchain-docs-scratch/docs/modules/agents/",draft:!1,editUrl:"https://github.com/hwchase17/langchainjs/edit/main/docs/docs/modules/agents/index.mdx",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"sidebar",previous:{title:"Zep Memory",permalink:"/langchain-docs-scratch/docs/modules/memory/integrations/zep_memory"},next:{title:"Agent types",permalink:"/langchain-docs-scratch/docs/modules/agents/agent_types/"}},g={},h=[{value:"Action agents",id:"action-agents",level:2},{value:"Plan-and-execute agents",id:"plan-and-execute-agents",level:2},{value:"Get started",id:"get-started",level:2}],m={toc:h},f="wrapper";function k(e){let{components:t,...n}=e;return(0,o.kt)(f,(0,a.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"agents"},"Agents"),(0,o.kt)("p",null,"Some applications require a flexible chain of calls to LLMs and other tools based on user input. The ",(0,o.kt)("strong",{parentName:"p"},"Agent")," interface provides the flexibility for such applications. An agent has access to a suite of tools, and determines which ones to use depending on the user input. Agents can use multiple tools, and use the output of one tool as the input to the next."),(0,o.kt)("p",null,"There are two main types of agents:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Action agents"),": At each timestep, decide on the next action using the outputs of all previous actions"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Plan-and-execute agents"),": Decide on the full sequence of actions up front, then execute them all without updating the plan")),(0,o.kt)("p",null,"Action agents are suitable for small tasks, while plan-and-execute agents are better for complex or long-running tasks that require maintaining long-term objectives and focus. Often the best approach is to combine the dynamism of an action agent with the planning abilities of a plan-and-execute agent by letting the plan-and-execute agent use action agents as tools."),(0,o.kt)("p",null,"For a full list of agent types see ",(0,o.kt)("a",{parentName:"p",href:"./agent_types.html"},"Agent types"),". Additional abstractions involved in agents are:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"./tools"},(0,o.kt)("strong",{parentName:"a"},"Tools")),": The actions an agent can take. What tools you give an agent highly depend on what you want the agent to do"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"./toolkits"},(0,o.kt)("strong",{parentName:"a"},"Toolkits")),": Wrappers around collections of tools that can be used together a specific use case. For example, in order for an agent to\ninteract with a SQL database it will likely need one tool to execute queries and another to inspect tables."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Agent executors"),": Wrapper around an action agent and a list of tools. This is responsible for the loop of running the agent\niteratively until the stopping criteria is met.")),(0,o.kt)("p",null,(0,o.kt)("img",{parentName:"p",src:"https://drive.google.com/uc?id=1TWarCNb9fHIQb-C-tlHNqU72spchBomG",alt:null})),(0,o.kt)("h2",{id:"action-agents"},"Action agents"),(0,o.kt)("p",null,"At a high-level an action agent:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Receives user input"),(0,o.kt)("li",{parentName:"ol"},"Decides which tool, if any, to use and the tool input"),(0,o.kt)("li",{parentName:"ol"},'Calls the tool and records the output (also known as an "observation")'),(0,o.kt)("li",{parentName:"ol"},"Decides the next step using the history of tools, tool inputs, and observations"),(0,o.kt)("li",{parentName:"ol"},"Repeats 3-4 until it determines it can respond directly to the user")),(0,o.kt)("p",null,"Although an agent can be constructed in many ways, it typically involves these components:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Prompt template"),": Responsible for taking the user input and previous steps and constructing a prompt\nto send to the language model"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Language model"),": Takes the prompt with use input and action history and decides what to do next"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Output parser"),": Takes the output of the language model and parses it into the next action or a final answer")),(0,o.kt)("h2",{id:"plan-and-execute-agents"},"Plan-and-execute agents"),(0,o.kt)("p",null,"At a high-level a plan-and-execute agent:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Receives user input"),(0,o.kt)("li",{parentName:"ol"},"Plans the full sequence of steps to take"),(0,o.kt)("li",{parentName:"ol"},"Executes the steps in order, passing the outputs of past steps as inputs to future steps")),(0,o.kt)("p",null,"The most typical implementation is to have the planner be a language model, and the executor be an action agent. Read more ",(0,o.kt)("a",{parentName:"p",href:"./agent_types/plan_and_execute.html"},"here"),"."),(0,o.kt)("h2",{id:"get-started"},"Get started"),(0,o.kt)(p,{mdxType:"GetStarted"}))}k.isMDXComponent=!0}}]);