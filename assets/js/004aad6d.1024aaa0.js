"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[85335],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>g});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),c=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=c(e.components);return a.createElement(l.Provider,{value:t},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},h=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),p=c(n),h=r,g=p["".concat(l,".").concat(h)]||p[h]||d[h]||o;return n?a.createElement(g,i(i({ref:t},u),{},{components:n})):a.createElement(g,i({ref:t},u))}));function g(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=h;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[p]="string"==typeof e?e:r,i[1]=s;for(var c=2;c<o;c++)i[c]=n[c];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}h.displayName="MDXCreateElement"},9821:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>d,frontMatter:()=>o,metadata:()=>s,toc:()=>c});var a=n(87462),r=(n(67294),n(3905));const o={},i="Tracing",s={unversionedId:"guides/tracing/index",id:"guides/tracing/index",title:"Tracing",description:"By enabling tracing in your LangChain runs, you\u2019ll be able to more effectively visualize, step through, and debug your chains and agents.",source:"@site/docs/guides/tracing/index.mdx",sourceDirName:"guides/tracing",slug:"/guides/tracing/",permalink:"/langchain-docs-scratch/docs/guides/tracing/",draft:!1,editUrl:"https://github.com/hwchase17/langchainjs/edit/main/docs/docs/guides/tracing/index.mdx",tags:[],version:"current",frontMatter:{},sidebar:"sidebar",previous:{title:"Model Comparison",permalink:"/langchain-docs-scratch/docs/guides/model_laboratory"},next:{title:"Tracing Walkthrough",permalink:"/langchain-docs-scratch/docs/guides/tracing/agent_with_tracing"}},l={},c=[{value:"Tracing Walkthrough",id:"tracing-walkthrough",level:2},{value:"Changing Sessions",id:"changing-sessions",level:2}],u={toc:c},p="wrapper";function d(e){let{components:t,...o}=e;return(0,r.kt)(p,(0,a.Z)({},u,o,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"tracing"},"Tracing"),(0,r.kt)("p",null,"By enabling tracing in your LangChain runs, you\u2019ll be able to more effectively visualize, step through, and debug your chains and agents."),(0,r.kt)("p",null,"First, you should install tracing and set up your environment properly.\nYou can use either a locally hosted version of this (uses Docker) or a cloud hosted version (in closed alpha).\nIf you're interested in using the hosted platform, please fill out the form ",(0,r.kt)("a",{parentName:"p",href:"https://forms.gle/tRCEMSeopZf6TE3b6"},"here"),"."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"./local_installation.md"},"Locally Hosted Setup")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"./hosted_installation.md"},"Cloud Hosted Setup"))),(0,r.kt)("h2",{id:"tracing-walkthrough"},"Tracing Walkthrough"),(0,r.kt)("p",null,'When you first access the UI, you should see a page with your tracing sessions.\nAn initial one "default" should already be created for you.\nA session is just a way to group traces together.\nIf you click on a session, it will take you to a page with no recorded traces that says "No Runs."\nYou can create a new session with the new session form.'),(0,r.kt)("p",null,(0,r.kt)("img",{src:n(82086).Z,width:"2550",height:"810"})),(0,r.kt)("p",null,"If we click on the ",(0,r.kt)("inlineCode",{parentName:"p"},"default")," session, we can see that to start we have no traces stored."),(0,r.kt)("p",null,(0,r.kt)("img",{src:n(40528).Z,width:"2552",height:"412"})),(0,r.kt)("p",null,"If we now start running chains and agents with tracing enabled, we will see data show up here.\nTo do so, we can run ",(0,r.kt)("a",{target:"_blank",href:n(11846).Z},"this notebook")," as an example.\nAfter running it, we will see an initial trace show up."),(0,r.kt)("p",null,(0,r.kt)("img",{src:n(99631).Z,width:"2560",height:"594"})),(0,r.kt)("p",null,"From here we can explore the trace at a high level by clicking on the arrow to show nested runs.\nWe can keep on clicking further and further down to explore deeper and deeper."),(0,r.kt)("p",null,(0,r.kt)("img",{src:n(69301).Z,width:"2564",height:"1190"})),(0,r.kt)("p",null,'We can also click on the "Explore" button of the top level run to dive even deeper.\nHere, we can see the inputs and outputs in full, as well as all the nested traces.'),(0,r.kt)("p",null,(0,r.kt)("img",{src:n(12611).Z,width:"2576",height:"1378"})),(0,r.kt)("p",null,"We can keep on exploring each of these nested traces in more detail.\nFor example, here is the lowest level trace with the exact inputs/outputs to the LLM."),(0,r.kt)("p",null,(0,r.kt)("img",{src:n(13590).Z,width:"2560",height:"1450"})),(0,r.kt)("h2",{id:"changing-sessions"},"Changing Sessions"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"To initially record traces to a session other than ",(0,r.kt)("inlineCode",{parentName:"li"},'"default"'),", you can set the ",(0,r.kt)("inlineCode",{parentName:"li"},"LANGCHAIN_SESSION")," environment variable to the name of the session you want to record to:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'import os\nos.environ["LANGCHAIN_TRACING"] = "true"\nos.environ["LANGCHAIN_SESSION"] = "my_session" # Make sure this session actually exists. You can create a new session in the UI.\n')),(0,r.kt)("ol",{start:2},(0,r.kt)("li",{parentName:"ol"},"To switch sessions mid-script or mid-notebook, do NOT set the ",(0,r.kt)("inlineCode",{parentName:"li"},"LANGCHAIN_SESSION")," environment variable. Instead: ",(0,r.kt)("inlineCode",{parentName:"li"},'langchain.set_tracing_callback_manager(session_name="my_session")'))))}d.isMDXComponent=!0},11846:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/files/agent_with_tracing-52cf7770c0e72e448ccceb8143505739.ipynb"},40528:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/default_empty-842f3ee5a97ee929c807141e4e0e0c34.png"},69301:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/explore-bf351d90ee35c2cb2e0bd50c8d49642b.png"},13590:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/explore_llm-22c9c1062dece3e67b04d5337b8bf687.png"},12611:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/explore_trace-819f3e28bb46084077d0bc03db6ac6ca.png"},99631:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/first_trace-b3747418dd961727590409573f28c6b2.png"},82086:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/homepage-1f6c119fac4b7175b23d7ae6c8167f5c.png"}}]);