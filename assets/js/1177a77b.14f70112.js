"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[74912],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>m});var a=n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=a.createContext({}),u=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},c=function(e){var t=u(e.components);return a.createElement(l.Provider,{value:t},e.children)},h="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,i=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),h=u(n),d=o,m=h["".concat(l,".").concat(d)]||h[d]||p[d]||i;return n?a.createElement(m,r(r({ref:t},c),{},{components:n})):a.createElement(m,r({ref:t},c))}));function m(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=n.length,r=new Array(i);r[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[h]="string"==typeof e?e:o,r[1]=s;for(var u=2;u<i;u++)r[u]=n[u];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},12537:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>p,frontMatter:()=>i,metadata:()=>s,toc:()=>u});var a=n(87462),o=(n(67294),n(3905));const i={},r="Evaluation",s={unversionedId:"guides/evaluation/index",id:"guides/evaluation/index",title:"Evaluation",description:"This section of documentation covers how we approach and think about evaluation in LangChain.",source:"@site/docs/guides/evaluation/index.mdx",sourceDirName:"guides/evaluation",slug:"/guides/evaluation/",permalink:"/langchain-docs-scratch/docs/guides/evaluation/",draft:!1,editUrl:"https://github.com/hwchase17/langchainjs/edit/main/docs/docs/guides/evaluation/index.mdx",tags:[],version:"current",frontMatter:{},sidebar:"sidebar",previous:{title:"Deployments",permalink:"/langchain-docs-scratch/docs/guides/deployments"},next:{title:"Agent Benchmarking: Search + Calculator",permalink:"/langchain-docs-scratch/docs/guides/evaluation/agent_benchmarking"}},l={},u=[{value:"The Problem",id:"the-problem",level:2},{value:"The Solution",id:"the-solution",level:2},{value:"The Examples",id:"the-examples",level:2},{value:"Other Examples",id:"other-examples",level:2}],c={toc:u},h="wrapper";function p(e){let{components:t,...n}=e;return(0,o.kt)(h,(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"evaluation"},"Evaluation"),(0,o.kt)("p",null,"This section of documentation covers how we approach and think about evaluation in LangChain.\nBoth evaluation of internal chains/agents, but also how we would recommend people building on top of LangChain approach evaluation."),(0,o.kt)("h2",{id:"the-problem"},"The Problem"),(0,o.kt)("p",null,"It can be really hard to evaluate LangChain chains and agents.\nThere are two main reasons for this:"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"# 1: Lack of data")),(0,o.kt)("p",null,"You generally don't have a ton of data to evaluate your chains/agents over before starting a project.\nThis is usually because Large Language Models (the core of most chains/agents) are terrific few-shot and zero shot learners,\nmeaning you are almost always able to get started on a particular task (text-to-SQL, question answering, etc) without\na large dataset of examples.\nThis is in stark contrast to traditional machine learning where you had to first collect a bunch of datapoints\nbefore even getting started using a model."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"# 2: Lack of metrics")),(0,o.kt)("p",null,"Most chains/agents are performing tasks for which there are not very good metrics to evaluate performance.\nFor example, one of the most common use cases is generating text of some form.\nEvaluating generated text is much more complicated than evaluating a classification prediction, or a numeric prediction."),(0,o.kt)("h2",{id:"the-solution"},"The Solution"),(0,o.kt)("p",null,"LangChain attempts to tackle both of those issues.\nWhat we have so far are initial passes at solutions - we do not think we have a perfect solution.\nSo we very much welcome feedback, contributions, integrations, and thoughts on this."),(0,o.kt)("p",null,"Here is what we have for each problem so far:"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"# 1: Lack of data")),(0,o.kt)("p",null,"We have started ",(0,o.kt)("inlineCode",{parentName:"p"},"LangChainDatasets <https://huggingface.co/LangChainDatasets>"),"_ a Community space on Hugging Face.\nWe intend this to be a collection of open source datasets for evaluating common chains and agents.\nWe have contributed five datasets of our own to start, but we highly intend this to be a community effort.\nIn order to contribute a dataset, you simply need to join the community and then you will be able to upload datasets."),(0,o.kt)("p",null,"We're also aiming to make it as easy as possible for people to create their own datasets.\nAs a first pass at this, we've added a QAGenerationChain, which given a document comes up\nwith question-answer pairs that can be used to evaluate question-answering tasks over that document down the line.\nSee ",(0,o.kt)("inlineCode",{parentName:"p"},"this notebook <./qa_generation.html>"),"_ for an example of how to use this chain."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"# 2: Lack of metrics")),(0,o.kt)("p",null,"We have two solutions to the lack of metrics."),(0,o.kt)("p",null,"The first solution is to use no metrics, and rather just rely on looking at results by eye to get a sense for how the chain/agent is performing.\nTo assist in this, we have developed (and will continue to develop) ",(0,o.kt)("inlineCode",{parentName:"p"},"tracing <../additional_resources/tracing.html>"),"_, a UI-based visualizer of your chain and agent runs."),(0,o.kt)("p",null,"The second solution we recommend is to use Language Models themselves to evaluate outputs.\nFor this we have a few different chains and prompts aimed at tackling this issue."),(0,o.kt)("h2",{id:"the-examples"},"The Examples"),(0,o.kt)("p",null,"We have created a bunch of examples combining the above two solutions to show how we internally evaluate chains and agents when we are developing.\nIn addition to the examples we've curated, we also highly welcome contributions here.\nTo facilitate that, we've included a ",(0,o.kt)("inlineCode",{parentName:"p"},"template notebook <./benchmarking_template.html>"),"_ for community members to use to build their own examples."),(0,o.kt)("p",null,"The existing examples we have are:"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"Question Answering (State of Union) <./qa_benchmarking_sota.html>"),"_: A notebook showing evaluation of a question-answering task over a State-of-the-Union address."),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"Question Answering (Paul Graham Essay) <./qa_benchmarking_pg.html>"),"_: A notebook showing evaluation of a question-answering task over a Paul Graham essay."),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"SQL Question Answering (Chinook) <./sql_qa_benchmarking_chinook.html>"),"_: A notebook showing evaluation of a question-answering task over a SQL database (the Chinook database)."),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"Agent Vectorstore <./agent_vectordb_sota_pg.html>"),"_: A notebook showing evaluation of an agent doing question answering while routing between two different vector databases."),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"Agent Search + Calculator <./agent_benchmarking.html>"),"_: A notebook showing evaluation of an agent doing question answering using a Search engine and a Calculator as tools."),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"Evaluating an OpenAPI Chain <./openapi_eval.html>"),"_: A notebook showing evaluation of an OpenAPI chain, including how to generate test data if you don't have any."),(0,o.kt)("h2",{id:"other-examples"},"Other Examples"),(0,o.kt)("p",null,"In addition, we also have some more generic resources for evaluation."),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"Question Answering <./question_answering.html>"),"_: An overview of LLMs aimed at evaluating question answering systems in general."),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"Data Augmented Question Answering <./data_augmented_question_answering.html>"),"_: An end-to-end example of evaluating a question answering system focused on a specific document (a RetrievalQAChain to be precise). This example highlights how to use LLMs to come up with question/answer examples to evaluate over, and then highlights how to use LLMs to evaluate performance on those generated examples."),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"Hugging Face Datasets <./huggingface_datasets.html>"),"_: Covers an example of loading and using a dataset from Hugging Face for evaluation."))}p.isMDXComponent=!0}}]);