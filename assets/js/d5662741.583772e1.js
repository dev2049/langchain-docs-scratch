"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[1042],{3905:(e,t,n)=>{n.d(t,{Zo:()=>h,kt:()=>m});var o=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=o.createContext({}),c=function(e){var t=o.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},h=function(e){var t=c(e.components);return o.createElement(l.Provider,{value:t},e.children)},p="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},d=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,l=e.parentName,h=i(e,["components","mdxType","originalType","parentName"]),p=c(n),d=r,m=p["".concat(l,".").concat(d)]||p[d]||u[d]||a;return n?o.createElement(m,s(s({ref:t},h),{},{components:n})):o.createElement(m,s({ref:t},h))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,s=new Array(a);s[0]=d;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i[p]="string"==typeof e?e:r,s[1]=i;for(var c=2;c<a;c++)s[c]=n[c];return o.createElement.apply(null,s)}return o.createElement.apply(null,n)}d.displayName="MDXCreateElement"},79558:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>m,frontMatter:()=>a,metadata:()=>i,toc:()=>c});var o=n(87462),r=(n(67294),n(3905));const a={},s="Metaphor Search",i={unversionedId:"modules/agents/tools/integrations/metaphor_search",id:"modules/agents/tools/integrations/metaphor_search",title:"Metaphor Search",description:"This notebook goes over how to use Metaphor search.",source:"@site/docs/modules/agents/tools/integrations/metaphor_search.md",sourceDirName:"modules/agents/tools/integrations",slug:"/modules/agents/tools/integrations/metaphor_search",permalink:"/langchain-docs-scratch/docs/modules/agents/tools/integrations/metaphor_search",draft:!1,editUrl:"https://github.com/hwchase17/langchainjs/edit/main/docs/docs/modules/agents/tools/integrations/metaphor_search.md",tags:[],version:"current",frontMatter:{},sidebar:"sidebar",previous:{title:"IFTTT WebHooks",permalink:"/langchain-docs-scratch/docs/modules/agents/tools/integrations/ifttt"},next:{title:"OpenWeatherMap API",permalink:"/langchain-docs-scratch/docs/modules/agents/tools/integrations/openweathermap"}},l={},c=[],h=(p="CodeOutputBlock",function(e){return console.warn("Component "+p+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",e)});var p;const u={toc:c},d="wrapper";function m(e){let{components:t,...n}=e;return(0,r.kt)(d,(0,o.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"metaphor-search"},"Metaphor Search"),(0,r.kt)("p",null,"This notebook goes over how to use Metaphor search."),(0,r.kt)("p",null,"First, you need to set up the proper API keys and environment variables. Request an API key ","[here]","(Sign up for early access here)."),(0,r.kt)("p",null,"Then enter your API key as an environment variable."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'import os\nos.environ["METAPHOR_API_KEY"] = ""\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"from langchain.utilities import MetaphorSearchAPIWrapper\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"search = MetaphorSearchAPIWrapper()\n")),(0,r.kt)("h1",{id:"call-the-api"},"Call the API"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"results")," takes in a Metaphor-optimized search query and a number of results (up to 500). It returns a list of results with title, url, author, and creation date."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'search.results("The best blog post about AI safety is definitely this: ", 10)\n')),(0,r.kt)(h,{lang:"python",mdxType:"CodeOutputBlock"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"    {'results': [{'url': 'https://www.anthropic.com/index/core-views-on-ai-safety', 'title': 'Core Views on AI Safety: When, Why, What, and How', 'dateCreated': '2023-03-08', 'author': None, 'score': 0.1998831331729889}, {'url': 'https://aisafety.wordpress.com/', 'title': 'Extinction Risk from Artificial Intelligence', 'dateCreated': '2013-10-08', 'author': None, 'score': 0.19801370799541473}, {'url': 'https://www.lesswrong.com/posts/WhNxG4r774bK32GcH/the-simple-picture-on-ai-safety', 'title': 'The simple picture on AI safety - LessWrong', 'dateCreated': '2018-05-27', 'author': 'Alex Flint', 'score': 0.19735534489154816}, {'url': 'https://slatestarcodex.com/2015/05/29/no-time-like-the-present-for-ai-safety-work/', 'title': 'No Time Like The Present For AI Safety Work', 'dateCreated': '2015-05-29', 'author': None, 'score': 0.19408763945102692}, {'url': 'https://www.lesswrong.com/posts/5BJvusxdwNXYQ4L9L/so-you-want-to-save-the-world', 'title': 'So You Want to Save the World - LessWrong', 'dateCreated': '2012-01-01', 'author': 'Lukeprog', 'score': 0.18853715062141418}, {'url': 'https://openai.com/blog/planning-for-agi-and-beyond', 'title': 'Planning for AGI and beyond', 'dateCreated': '2023-02-24', 'author': 'Authors', 'score': 0.18665121495723724}, {'url': 'https://waitbutwhy.com/2015/01/artificial-intelligence-revolution-1.html', 'title': 'The Artificial Intelligence Revolution: Part 1 - Wait But Why', 'dateCreated': '2015-01-22', 'author': 'Tim Urban', 'score': 0.18604731559753418}, {'url': 'https://forum.effectivealtruism.org/posts/uGDCaPFaPkuxAowmH/anthropic-core-views-on-ai-safety-when-why-what-and-how', 'title': 'Anthropic: Core Views on AI Safety: When, Why, What, and How - EA Forum', 'dateCreated': '2023-03-09', 'author': 'Jonmenaster', 'score': 0.18415069580078125}, {'url': 'https://www.lesswrong.com/posts/xBrpph9knzWdtMWeQ/the-proof-of-doom', 'title': 'The Proof of Doom - LessWrong', 'dateCreated': '2022-03-09', 'author': 'Johnlawrenceaspden', 'score': 0.18159329891204834}, {'url': 'https://intelligence.org/why-ai-safety/', 'title': 'Why AI Safety? - Machine Intelligence Research Institute', 'dateCreated': '2017-03-01', 'author': None, 'score': 0.1814115345478058}]}\n\n\n\n\n\n    [{'title': 'Core Views on AI Safety: When, Why, What, and How',\n      'url': 'https://www.anthropic.com/index/core-views-on-ai-safety',\n      'author': None,\n      'date_created': '2023-03-08'},\n     {'title': 'Extinction Risk from Artificial Intelligence',\n      'url': 'https://aisafety.wordpress.com/',\n      'author': None,\n      'date_created': '2013-10-08'},\n     {'title': 'The simple picture on AI safety - LessWrong',\n      'url': 'https://www.lesswrong.com/posts/WhNxG4r774bK32GcH/the-simple-picture-on-ai-safety',\n      'author': 'Alex Flint',\n      'date_created': '2018-05-27'},\n     {'title': 'No Time Like The Present For AI Safety Work',\n      'url': 'https://slatestarcodex.com/2015/05/29/no-time-like-the-present-for-ai-safety-work/',\n      'author': None,\n      'date_created': '2015-05-29'},\n     {'title': 'So You Want to Save the World - LessWrong',\n      'url': 'https://www.lesswrong.com/posts/5BJvusxdwNXYQ4L9L/so-you-want-to-save-the-world',\n      'author': 'Lukeprog',\n      'date_created': '2012-01-01'},\n     {'title': 'Planning for AGI and beyond',\n      'url': 'https://openai.com/blog/planning-for-agi-and-beyond',\n      'author': 'Authors',\n      'date_created': '2023-02-24'},\n     {'title': 'The Artificial Intelligence Revolution: Part 1 - Wait But Why',\n      'url': 'https://waitbutwhy.com/2015/01/artificial-intelligence-revolution-1.html',\n      'author': 'Tim Urban',\n      'date_created': '2015-01-22'},\n     {'title': 'Anthropic: Core Views on AI Safety: When, Why, What, and How - EA Forum',\n      'url': 'https://forum.effectivealtruism.org/posts/uGDCaPFaPkuxAowmH/anthropic-core-views-on-ai-safety-when-why-what-and-how',\n      'author': 'Jonmenaster',\n      'date_created': '2023-03-09'},\n     {'title': 'The Proof of Doom - LessWrong',\n      'url': 'https://www.lesswrong.com/posts/xBrpph9knzWdtMWeQ/the-proof-of-doom',\n      'author': 'Johnlawrenceaspden',\n      'date_created': '2022-03-09'},\n     {'title': 'Why AI Safety? - Machine Intelligence Research Institute',\n      'url': 'https://intelligence.org/why-ai-safety/',\n      'author': None,\n      'date_created': '2017-03-01'}]\n"))),(0,r.kt)("h1",{id:"use-metaphor-as-a-tool"},"Use Metaphor as a tool"),(0,r.kt)("p",null,"Metaphor can be used as a tool that gets URLs that other tools such as browsing tools."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'from langchain.agents.agent_toolkits import PlayWrightBrowserToolkit\nfrom langchain.tools.playwright.utils import (\n    create_async_playwright_browser,# A synchronous browser is available, though it isn\'t compatible with jupyter.\n)\n\nasync_browser = create_async_playwright_browser()\ntoolkit = PlayWrightBrowserToolkit.from_browser(async_browser=async_browser)\ntools = toolkit.get_tools()\n\ntools_by_name = {tool.name: tool for tool in tools}\nprint(tools_by_name.keys())\nnavigate_tool = tools_by_name["navigate_browser"]\nextract_text = tools_by_name["extract_text"]\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'from langchain.agents import initialize_agent, AgentType\nfrom langchain.chat_models import ChatOpenAI\nfrom langchain.tools import MetaphorSearchResults\n\nllm = ChatOpenAI(model_name="gpt-4", temperature=0.7)\n\nmetaphor_tool = MetaphorSearchResults(api_wrapper=search)\n\nagent_chain = initialize_agent([metaphor_tool, extract_text, navigate_tool], llm, agent=AgentType.STRUCTURED_CHAT_ZERO_SHOT_REACT_DESCRIPTION, verbose=True)\n\nagent_chain.run("find me an interesting tweet about AI safety using Metaphor, then tell me the first sentence in the post. Do not finish until able to retrieve the first sentence.")\n')),(0,r.kt)(h,{lang:"python",mdxType:"CodeOutputBlock"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"    \n    \n    > Entering new AgentExecutor chain...\n    Thought: I need to find a tweet about AI safety using Metaphor Search.\n    Action:\n    ```\n    {\n      \"action\": \"Metaphor Search Results JSON\",\n      \"action_input\": {\n        \"query\": \"interesting tweet AI safety\",\n        \"num_results\": 1\n      }\n    }\n    ```\n    {'results': [{'url': 'https://safe.ai/', 'title': 'Center for AI Safety', 'dateCreated': '2022-01-01', 'author': None, 'score': 0.18083244562149048}]}\n    \n    Observation: [{'title': 'Center for AI Safety', 'url': 'https://safe.ai/', 'author': None, 'date_created': '2022-01-01'}]\n    Thought:I need to navigate to the URL provided in the search results to find the tweet.\n    \n    > Finished chain.\n\n\n\n\n\n    'I need to navigate to the URL provided in the search results to find the tweet.'\n"))))}m.isMDXComponent=!0}}]);