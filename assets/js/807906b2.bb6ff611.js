"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[46634],{3905:(e,t,n)=>{n.d(t,{Zo:()=>h,kt:()=>m});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),c=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},h=function(e){var t=c(e.components);return a.createElement(l.Provider,{value:t},e.children)},u="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,h=i(e,["components","mdxType","originalType","parentName"]),u=c(n),d=r,m=u["".concat(l,".").concat(d)]||u[d]||p[d]||o;return n?a.createElement(m,s(s({ref:t},h),{},{components:n})):a.createElement(m,s({ref:t},h))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,s=new Array(o);s[0]=d;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i[u]="string"==typeof e?e:r,s[1]=i;for(var c=2;c<o;c++)s[c]=n[c];return a.createElement.apply(null,s)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},49399:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>u,default:()=>f,frontMatter:()=>h,metadata:()=>p,toc:()=>m});var a=n(87462),r=(n(67294),n(3905));const o=(s="CodeOutputBlock",function(e){return console.warn("Component "+s+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",e)});var s;const i={toc:[]},l="wrapper";function c(e){let{components:t,...n}=e;return(0,r.kt)(l,(0,a.Z)({},i,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"from langchain import LLMMathChain, OpenAI, SerpAPIWrapper, SQLDatabase, SQLDatabaseChain\nfrom langchain.agents import initialize_agent, Tool\nfrom langchain.agents import AgentType\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'llm = OpenAI(temperature=0)\nsearch = SerpAPIWrapper()\nllm_math_chain = LLMMathChain(llm=llm, verbose=True)\ndb = SQLDatabase.from_uri("sqlite:///../../../../../notebooks/Chinook.db")\ndb_chain = SQLDatabaseChain.from_llm(llm, db, verbose=True)\ntools = [\n    Tool(\n        name = "Search",\n        func=search.run,\n        description="useful for when you need to answer questions about current events. You should ask targeted questions"\n    ),\n    Tool(\n        name="Calculator",\n        func=llm_math_chain.run,\n        description="useful for when you need to answer questions about math"\n    ),\n    Tool(\n        name="FooBar DB",\n        func=db_chain.run,\n        description="useful for when you need to answer questions about FooBar. Input should be in the form of a question containing full context"\n    )\n]\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"mrkl = initialize_agent(tools, llm, agent=AgentType.ZERO_SHOT_REACT_DESCRIPTION, verbose=True)\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'mrkl.run("Who is Leo DiCaprio\'s girlfriend? What is her current age raised to the 0.43 power?")\n')),(0,r.kt)(o,{lang:"python",mdxType:"CodeOutputBlock"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'    \n    \n    > Entering new AgentExecutor chain...\n     I need to find out who Leo DiCaprio\'s girlfriend is and then calculate her age raised to the 0.43 power.\n    Action: Search\n    Action Input: "Who is Leo DiCaprio\'s girlfriend?"\n    Observation: DiCaprio met actor Camila Morrone in December 2017, when she was 20 and he was 43. They were spotted at Coachella and went on multiple vacations together. Some reports suggested that DiCaprio was ready to ask Morrone to marry him. The couple made their red carpet debut at the 2020 Academy Awards.\n    Thought: I need to calculate Camila Morrone\'s age raised to the 0.43 power.\n    Action: Calculator\n    Action Input: 21^0.43\n    \n    > Entering new LLMMathChain chain...\n    21^0.43\n    ```text\n    21**0.43\n    ```\n    ...numexpr.evaluate("21**0.43")...\n    \n    Answer: 3.7030049853137306\n    > Finished chain.\n    \n    Observation: Answer: 3.7030049853137306\n    Thought: I now know the final answer.\n    Final Answer: Camila Morrone is Leo DiCaprio\'s girlfriend and her current age raised to the 0.43 power is 3.7030049853137306.\n    \n    > Finished chain.\n\n\n\n\n\n    "Camila Morrone is Leo DiCaprio\'s girlfriend and her current age raised to the 0.43 power is 3.7030049853137306."\n'))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"mrkl.run(\"What is the full name of the artist who recently released an album called 'The Storm Before the Calm' and are they in the FooBar database? If so, what albums of theirs are in the FooBar database?\")\n")),(0,r.kt)(o,{lang:"python",mdxType:"CodeOutputBlock"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'    \n    \n    > Entering new AgentExecutor chain...\n     I need to find out the artist\'s full name and then search the FooBar database for their albums.\n    Action: Search\n    Action Input: "The Storm Before the Calm" artist\n    Observation: The Storm Before the Calm (stylized in all lowercase) is the tenth (and eighth international) studio album by Canadian-American singer-songwriter Alanis Morissette, released June 17, 2022, via Epiphany Music and Thirty Tigers, as well as by RCA Records in Europe.\n    Thought: I now need to search the FooBar database for Alanis Morissette\'s albums.\n    Action: FooBar DB\n    Action Input: What albums by Alanis Morissette are in the FooBar database?\n    \n    > Entering new SQLDatabaseChain chain...\n    What albums by Alanis Morissette are in the FooBar database?\n    SQLQuery:\n\n    /Users/harrisonchase/workplace/langchain/langchain/sql_database.py:191: SAWarning: Dialect sqlite+pysqlite does *not* support Decimal objects natively, and SQLAlchemy must convert from floating point - rounding errors and other issues may occur. Please consider storing Decimal numbers as strings or integers on this platform for lossless storage.\n      sample_rows = connection.execute(command)\n\n\n     SELECT "Title" FROM "Album" INNER JOIN "Artist" ON "Album"."ArtistId" = "Artist"."ArtistId" WHERE "Name" = \'Alanis Morissette\' LIMIT 5;\n    SQLResult: [(\'Jagged Little Pill\',)]\n    Answer: The albums by Alanis Morissette in the FooBar database are Jagged Little Pill.\n    > Finished chain.\n    \n    Observation:  The albums by Alanis Morissette in the FooBar database are Jagged Little Pill.\n    Thought: I now know the final answer.\n    Final Answer: The artist who released the album \'The Storm Before the Calm\' is Alanis Morissette and the albums of hers in the FooBar database are Jagged Little Pill.\n    \n    > Finished chain.\n\n\n\n\n\n    "The artist who released the album \'The Storm Before the Calm\' is Alanis Morissette and the albums of hers in the FooBar database are Jagged Little Pill."\n'))))}c.isMDXComponent=!0;const h={},u="MRKL",p={unversionedId:"modules/agents/agents/how_to/mrkl",id:"modules/agents/agents/how_to/mrkl",title:"MRKL",description:"This notebook showcases using an agent to replicate the MRKL chain.",source:"@site/docs/modules/agents/agents/how_to/mrkl.mdx",sourceDirName:"modules/agents/agents/how_to",slug:"/modules/agents/agents/how_to/mrkl",permalink:"/langchain-docs-scratch/docs/modules/agents/agents/how_to/mrkl",draft:!1,editUrl:"https://github.com/hwchase17/langchainjs/edit/main/docs/docs/modules/agents/agents/how_to/mrkl.mdx",tags:[],version:"current",frontMatter:{},sidebar:"sidebar",previous:{title:"How to use a timeout for the agent",permalink:"/langchain-docs-scratch/docs/modules/agents/agents/how_to/max_time_limit"},next:{title:"MRKL Chat",permalink:"/langchain-docs-scratch/docs/modules/agents/agents/how_to/mrkl_chat"}},d={},m=[],g={toc:m},b="wrapper";function f(e){let{components:t,...n}=e;return(0,r.kt)(b,(0,a.Z)({},g,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"mrkl"},"MRKL"),(0,r.kt)("p",null,"This notebook showcases using an agent to replicate the MRKL chain."),(0,r.kt)("p",null,"This uses the example Chinook database.\nTo set it up follow the instructions on ",(0,r.kt)("a",{parentName:"p",href:"https://database.guide/2-sample-databases-sqlite/"},"https://database.guide/2-sample-databases-sqlite/"),", placing the ",(0,r.kt)("inlineCode",{parentName:"p"},".db")," file in a notebooks folder at the root of this repository."),(0,r.kt)(c,{mdxType:"Example"}))}f.isMDXComponent=!0}}]);