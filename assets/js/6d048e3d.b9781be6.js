"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[39709],{3905:(t,e,n)=>{n.d(e,{Zo:()=>u,kt:()=>h});var o=n(67294);function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){a(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function s(t,e){if(null==t)return{};var n,o,a=function(t,e){if(null==t)return{};var n,o,a={},r=Object.keys(t);for(o=0;o<r.length;o++)n=r[o],e.indexOf(n)>=0||(a[n]=t[n]);return a}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(o=0;o<r.length;o++)n=r[o],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}var l=o.createContext({}),c=function(t){var e=o.useContext(l),n=e;return t&&(n="function"==typeof t?t(e):i(i({},e),t)),n},u=function(t){var e=c(t.components);return o.createElement(l.Provider,{value:e},t.children)},p="mdxType",d={inlineCode:"code",wrapper:function(t){var e=t.children;return o.createElement(o.Fragment,{},e)}},m=o.forwardRef((function(t,e){var n=t.components,a=t.mdxType,r=t.originalType,l=t.parentName,u=s(t,["components","mdxType","originalType","parentName"]),p=c(n),m=a,h=p["".concat(l,".").concat(m)]||p[m]||d[m]||r;return n?o.createElement(h,i(i({ref:e},u),{},{components:n})):o.createElement(h,i({ref:e},u))}));function h(t,e){var n=arguments,a=e&&e.mdxType;if("string"==typeof t||a){var r=n.length,i=new Array(r);i[0]=m;var s={};for(var l in e)hasOwnProperty.call(e,l)&&(s[l]=e[l]);s.originalType=t,s[p]="string"==typeof t?t:a,i[1]=s;for(var c=2;c<r;c++)i[c]=n[c];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}m.displayName="MDXCreateElement"},73699:(t,e,n)=>{n.r(e),n.d(e,{assets:()=>m,contentTitle:()=>p,default:()=>y,frontMatter:()=>u,metadata:()=>d,toc:()=>h});var o=n(87462),a=(n(67294),n(3905));const r=(i="CodeOutputBlock",function(t){return console.warn("Component "+i+" was not imported, exported, or provided by MDXProvider as global scope"),(0,a.kt)("div",t)});var i;const s={toc:[]},l="wrapper";function c(t){let{components:e,...n}=t;return(0,a.kt)(l,(0,o.Z)({},s,n,{components:e,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"The default recommended text splitter is the RecursiveCharacterTextSplitter. This text splitter takes a list of characters. It tries to create chunks based on splitting on the first character, but if any chunks are too large it then moves onto the next character, and so forth. By default the characters it tries to split on are ",(0,a.kt)("inlineCode",{parentName:"p"},'["\\n\\n", "\\n", " ", ""]')),(0,a.kt)("p",null,"In addition to controlling which characters you can split on, you can also control a few other things:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"length_function"),": how the length of chunks is calculated. Defaults to just counting number of characters, but it's pretty common to pass a token counter here."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"chunk_size"),": the maximum size of your chunks (as measured by the length function)."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"chunk_overlap"),": the maximum overlap between chunks. It can be nice to have some overlap to maintain some continuity between chunks (eg do a sliding window).")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-python"},"# This is a long document we can split up.\nwith open('../../state_of_the_union.txt') as f:\n    state_of_the_union = f.read()\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-python"},"from langchain.text_splitter import RecursiveCharacterTextSplitter\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-python"},"text_splitter = RecursiveCharacterTextSplitter(\n    # Set a really small chunk size, just to show.\n    chunk_size = 100,\n    chunk_overlap  = 20,\n    length_function = len,\n)\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-python"},"texts = text_splitter.create_documents([state_of_the_union])\nprint(texts[0])\nprint(texts[1])\n")),(0,a.kt)(r,{lang:"python",mdxType:"CodeOutputBlock"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"    page_content='Madam Speaker, Madam Vice President, our First Lady and Second Gentleman. Members of Congress and' lookup_str='' metadata={} lookup_index=0\n    page_content='of Congress and the Cabinet. Justices of the Supreme Court. My fellow Americans.' lookup_str='' metadata={} lookup_index=0\n"))))}c.isMDXComponent=!0;const u={sidebar_position:1},p="Document transformers",d={unversionedId:"modules/data_io/text_splitters/index",id:"modules/data_io/text_splitters/index",title:"Document transformers",description:"Once you've loaded documents, you'll often want to transform them to better suit your application. The simplest example",source:"@site/docs/modules/data_io/text_splitters/index.mdx",sourceDirName:"modules/data_io/text_splitters",slug:"/modules/data_io/text_splitters/",permalink:"/langchain-docs-scratch/docs/modules/data_io/text_splitters/",draft:!1,editUrl:"https://github.com/hwchase17/langchainjs/edit/main/docs/docs/modules/data_io/text_splitters/index.mdx",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"sidebar",previous:{title:"YouTube transcripts",permalink:"/langchain-docs-scratch/docs/modules/data_io/document_loaders/integrations/youtube_transcript"},next:{title:"Split by character",permalink:"/langchain-docs-scratch/docs/modules/data_io/text_splitters/how_to/character_text_splitter"}},m={},h=[{value:"Splitting text",id:"splitting-text",level:2},{value:"Get started",id:"get-started",level:2}],f={toc:h},k="wrapper";function y(t){let{components:e,...n}=t;return(0,a.kt)(k,(0,o.Z)({},f,n,{components:e,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"document-transformers"},"Document transformers"),(0,a.kt)("p",null,"Once you've loaded documents, you'll often want to transform them to better suit your application. The simplest example\nis you may want to split a long document into smaller chunks that can fit into your model's context window. LangChain\nhas a number of built-in document transformers that make it easy to split, filter, and otherwise manipulate documents."),(0,a.kt)("h2",{id:"splitting-text"},"Splitting text"),(0,a.kt)("p",null,'When you want to deal with long pieces of text, it is necessary to split up that text into chunks.\nAs simple as this sounds, there is a lot of potential complexity here. Ideally, you want to keep the semantically related pieces of text together. What "semantically related" means could depend on the type of text.\nThis notebook showcases several ways to do that.'),(0,a.kt)("p",null,"At a high level, text splitters work as following:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Split the text up into small, semantically meaningful chunks (often sentences)."),(0,a.kt)("li",{parentName:"ol"},"Start combining these small chunks into a larger chunk until you reach a certain size (as measured by some function)."),(0,a.kt)("li",{parentName:"ol"},"Once you reach that size, make that chunk its own piece of text and then start creating a new chunk of text with some overlap (to keep context between chunks).")),(0,a.kt)("p",null,"That means there are two different axes along which you can customize your text splitter:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"How the text is split"),(0,a.kt)("li",{parentName:"ol"},"How the chunk size is measured")),(0,a.kt)("h2",{id:"get-started"},"Get started"),(0,a.kt)(c,{mdxType:"GetStarted"}))}y.isMDXComponent=!0}}]);